<html>
  <%- include('includes/head')%>

  <body>
    <%- include('includes/nav')%>
    <!-- MDB -->
    <div class="container">
      <div class="row pt-5">
        <div class="col-md-3">
          CLIENT LOGO HERE
          <img
            src="https://images.unsplash.com/photo-1631557776808-91908aba7ca0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHx0b3BpYy1mZWVkfDE3fGFldTZyTC1qNmV3fHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=500&q=60"
            class="card-img-top"
            height="50rem"
          />
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-4 text-center">
              <b> Total Licences </b>
              <p id="totallicences"></p>
              <br />
            </div>
            <div class="col-md-4 text-center">
              <b>Assigned Licences</b> <br />
              <p id="assignedlicences"></p>
            </div>
            <div class="col-md-4 text-center">
              <b> Remaining Licences</b> <br />
              <p id="remaininglicences"></p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <form>
            <!-- 2 column grid layout with text inputs for the first and last names -->
            <div class="row mb-4">
              <div class="col">
                <div class="form-outline">
                  <input type="text" id="form3Example1" class="form-control" />
                  <label class="form-label" for="form3Example1"
                    >First name</label
                  >
                </div>
              </div>
              <div class="col">
                <div class="form-outline">
                  <input type="text" id="form3Example2" class="form-control" />
                  <label class="form-label" for="form3Example2"
                    >Last name</label
                  >
                </div>
              </div>
            </div>

            <!-- Email input -->
            <div class="form-outline mb-4">
              <input type="email" id="form3Example3" class="form-control" />
              <label class="form-label" for="form3Example3"
                >Email address</label
              >
            </div>

            <!-- Password input -->
            <div class="form-outline mb-4">
              <input type="password" id="form3Example4" class="form-control" />
              <label class="form-label" for="form3Example4">Password</label>
            </div>

            <!-- Checkbox -->
            <div class="form-check d-flex justify-content-center mb-4">
              <input
                class="form-check-input me-2"
                type="checkbox"
                value=""
                id="form2Example33"
                checked
              />
              <label class="form-check-label" for="form2Example33">
                Subscribe to our newsletter
              </label>
            </div>

            <!-- Submit button -->
            <button type="submit" class="btn btn-primary btn-block mb-4">
              Sign up
            </button>
          </form>
        </div>
      </div>
      <div class="row pt-5">
        <div class="col-md-3"></div>
        <div class="col-md-6">
          List of users will be populated from fs database
          <div
            id="user1"
            class="card bg-success bg-gradient bg-opacity-50 my-4"
          >
            <div class="card-body">
              <div class="row p2">
                <div class="col-md-4">Cortni Jones</div>
                <div class="col-md-4">
                  <b><p id="licencestatus">Licence Active</p></b>
                </div>
                <div class="col-md-4 d-flex justify-content-end">
                  <!-- Checked switch -->
                  <div id="toggle1" class="form-check form-switch">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="flexSwitchCheckChecked1"
                      checked
                    />
                    <label
                      class="form-check-label"
                      for="flexSwitchCheckChecked1"
                    ></label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3"></div>
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.0.0/mdb.min.js"
    ></script>
    <script>
      let totalLicences = 5;
      let assignedLicences = 1;
      let availableLicences = 4;

      let totalLicencesHTML = document.getElementById("totallicences");
      let assignedLicencesHTML = document.getElementById("assignedlicences");
      let remainingLicencesHTML = document.getElementById("remaininglicences");

      updateLicenceCount();

      const user1Switch = document.getElementById("flexSwitchCheckChecked1");
      const licenceStatus = document.getElementById("licencestatus");
      const user1 = document.getElementById("user1");
      user1Switch.addEventListener("change", (e) => {
        if (user1Switch.checked) {
          licenceStatus.innerHTML = "Licence Active";
          user1.classList.remove("bg-danger");
          user1.classList.add("bg-success");
          assignedLicences++;
          availableLicences--;
          updateLicenceCount();
          console.log(availableLicences);
        } else {
          licenceStatus.innerHTML = "Licence Unassigned";
          user1.classList.remove("bg-success");
          user1.classList.add("bg-danger");
          assignedLicences--;
          availableLicences++;

          updateLicenceCount();
        }
      });

      function updateLicenceCount() {
        totalLicencesHTML.innerHTML = `${totalLicences}`;
        assignedLicencesHTML.innerHTML = `${assignedLicences}`;
        remainingLicencesHTML.innerHTML = `${availableLicences}`;
      }
    </script>
  </body>
</html>
